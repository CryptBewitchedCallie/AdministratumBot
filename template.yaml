AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: 'SAM template Administratum Discord bot

  '
Globals:
  Function:
    Timeout: 900
Parameters:
  GLOBAL_APP_ID:
    Type: "String"
    Default: "838829120052920430"
    Description: Enter the application ID generated by Discord
  GLOBAL_S3_BUCKET:
    Type: "String"
    Default: "administratum-test"
    Description: Enter the name of the S3 bucket within your account where the Resources directory exists

Resources:
  AuthFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: Lambda_Function.lambda_handler
      Runtime: python3.8
      CodeUri: Lambda/AuthFunction/
      Environment:
        Variables:
          APP_ID:
            Ref: GLOBAL_APP_ID
          S3_BUCKET:
            Ref: GLOBAL_S3_BUCKET
  GetWebhookFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: Lambda_Function.lambda_handler
      Runtime: python3.8
      CodeUri: Lambda/GetWebhookFunction/
      Environment:
        Variables:
          APP_ID:
            Ref: GLOBAL_APP_ID
          S3_BUCKET:
            Ref: GLOBAL_S3_BUCKET
  SendWebhookFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: Lambda_Function.lambda_handler
      Runtime: python3.8
      CodeUri: Lambda/SendWebhookFunction/
      Environment:
        Variables:
          APP_ID:
            Ref: GLOBAL_APP_ID
          S3_BUCKET:
            Ref: GLOBAL_S3_BUCKET
